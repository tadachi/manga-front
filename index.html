<!DOCTYPE html>
<html lang="en" ng-app="App">

<head>
    <!-- Shadow DOMed -->
    <!-- Jquery -->
    <script src="js/jquery.min.js"></script>
    <!-- AngularJS -->
    <script src='js/angular.min.js'></script>
    <!-- StringJS -->
    <script src="js/string.min.js"></script>

    <!-- Latest compiled and minified CSS -->
    <link rel="stylesheet" href="css/bootstrap.min.css">
    <!-- Optional theme -->
    <link rel="stylesheet" href="css/bootstrap-theme.min.css">
    <!-- Latest compiled and minified JavaScript -->
    <script src="js/bootstrap.min.js"></script>
    <!-- Manga-Front.js must come after AngularJS -->
    <script src="js/manga-front.js"></script>
</head>

<body ng-controller="Ctrl" ng-keydown="key($event)">
<div id="header">
    <!-- Shadow DOMed -->
</div>
<div id="body">
    Body
    <div >
        <div>
            <!-- Debug ->
            <!--<p>selected item is : {{selectedManga.title}}</p>-->
            <!--<p>selected item is : {{selectedManga.path}}</p>-->
            <!--<p>selected item is : {{selectedChapter.title}}</p>-->
            <!--<p>selected item is : {{selectedPage.page}}</p>-->
            <!-- track by is a hack -->
            <select ng-model="selectedManga"
                    ng-options="manga.title for manga in mangas track by manga.title"
                    ng-change="loadMangaScript(selectedManga.path)">
                <option value="" disabled> - Pick a Manga - </option>
            </select>
            <select ng-model="selectedChapter"
                    ng-options="chapter.title for chapter in chapters track by chapter.title"
                    ng-change="changeChapterPages(selectedChapter.index)">
                <option value="" disabled> - Pick a Chapter - </option>
            </select>
            <select ng-model="selectedPage"
                    ng-options="page.page for page in pages"
                    ng-change="setImgSrc(selectedPage.url)"
                    >
                <option value="" disabled> - Pick a Page - </option>
            </select>
            <button ng-click="prev()"> Prev </button>
            <button ng-click="next()"> Next </button>
            <div id="image">
                <img ng-src="{{src}}" />
            </div>
        </div>
    </div>
</div>

<div id="footer">
    <!-- Shadow DOMed -->
</div>
</body>
</html>

<template id="headTemplate">
    <meta charset="utf-8">
    <title>stub</title>
    <meta name="description" content="App">
    <META NAME="ROBOTS" CONTENT="NOINDEX, NOFOLLOW">
</template>

<template id="headerTemplate">
    Header
</template>

<template id="footerTemplate">
    Footer
</template>

<script>
    var shadow = document.head.createShadowRoot();
    var template = document.querySelector('#headTemplate');
    var templateClone = document.importNode(template.content, true);
    shadow.appendChild(templateClone);
</script>

<script>
    var shadow = document.querySelector("#header").createShadowRoot();
    var template = document.querySelector('#headerTemplate');
    var templateClone = document.importNode(template.content, true);
    shadow.appendChild(templateClone);
</script>

<script>
    var shadow = document.querySelector("#footer").createShadowRoot();
    var template = document.querySelector('#footerTemplate');
    var templateClone = document.importNode(template.content, true);
    shadow.appendChild(templateClone);
</script>